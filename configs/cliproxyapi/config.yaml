# CLIProxyAPI Configuration
# This configuration file manages the proxy API settings

# Server Configuration
host: "127.0.0.1"  # Bind to localhost only for security
port: 8317  # Default port

# TLS Configuration
tls:
  enable: false  # Enable TLS for HTTPS (set to true if you have certificates)
  cert: ""       # Path to TLS certificate file
  key: ""        # Path to TLS private key file

# Management API Settings
remote-management:
  allow-remote: false  # Only allow localhost access for security
  secret-key: ""       # Management key for accessing management endpoints (leave empty to disable)
  disable-control-panel: false  # Set to true to disable the bundled management control panel
  panel-github-repository: "https://github.com/router-for-me/Cli-Proxy-API-Management-Center"

# Authentication Settings
auth-dir: "~/.cli-proxy-api"  # Authentication directory
api-keys: []  # List of API keys for authentication

# Logging and Debugging
debug: false  # Enable debug logging
logging-to-file: false  # Write logs to rotating files instead of stdout
logs-max-total-size-mb: 0  # Maximum total size of log files in MB (0 disables rotation)
usage-statistics-enabled: false  # Enable in-memory usage statistics aggregation

# Performance and Operation
commercial-mode: false  # Disable high-overhead HTTP middleware features to reduce memory usage under high concurrency
proxy-url: ""  # Proxy URL supporting socks5/http/https protocols
force-model-prefix: false  # When true, unprefixed model requests only use credentials without a prefix
request-retry: 3  # Number of times to retry a request
max-retry-interval: 30  # Maximum wait time in seconds for a cooled-down credential before triggering a retry

# Quota and Routing
quota-exceeded:
  switch-project: true  # Automatically switch to another project when a quota is exceeded
  switch-preview-model: true  # Automatically switch to a preview model when a quota is exceeded
routing:
  strategy: "round-robin"  # Strategy for selecting credentials when multiple match (options: "round-robin", "fill-first")

# WebSocket and Streaming
ws-auth: false  # Enable authentication for WebSocket API
nonstream-keepalive-interval: 0  # Emit blank lines every N seconds for non-streaming responses to prevent idle timeouts (0 disables)
codex-instructions-enabled: false  # Enable official Codex instructions injection for Codex API requests

# Streaming Behavior
streaming:
  keepalive-seconds: 15  # SSE keep-alive interval in seconds (0 or negative disables)
  bootstrap-retries: 1  # Retries before first byte is sent (0 disables)